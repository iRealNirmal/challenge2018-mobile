{"version":3,"sources":["webpack:///./src/app/cart/cart.module.ts","webpack:///./src/app/cart/cart.page.html","webpack:///./src/app/cart/cart.page.scss","webpack:///./src/app/cart/cart.page.ts","webpack:///./src/app/service/cart.service.ts"],"names":[],"mappings":"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","file":"cart-cart-module~tabs-tabs-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CartPage } from './cart.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CartPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [CartPage]\n})\nexport class CartPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n      <ion-buttons slot=\\\"start\\\">\\n          <ion-back-button></ion-back-button>\\n        </ion-buttons>\\n    <ion-title>cart</ion-title>\\n    \\n    <ion-buttons slot=\\\"primary\\\">\\n      <ion-button (click)=\\\"addCart()\\\">\\n          <ion-icon slot=\\\"icon-only\\\" name=\\\"qr-scanner\\\"></ion-icon>\\n        </ion-button>\\n  </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <ion-list>\\n    <ion-item  detail-none *ngFor=\\\"let product of cartList;let i = index\\\">\\n      <ion-label>\\n        <h2>{{product.name}}</h2>\\n        <p>\\n          {{product.price | currency:'INR'}} \\n          <ion-badge color=\\\"primary\\\">{{product.count}}</ion-badge>\\n        </p>\\n        <p>Amount {{product.count * product.price | currency:'INR'}}</p>\\n      </ion-label>\\n      <ion-button shape=\\\"round\\\" color=\\\"danger\\\" fill=\\\"outline\\\" item-end (click)=\\\"removeCart(i)\\\">Remove <ion-icon name=\\\"close\\\"></ion-icon></ion-button>\\n    </ion-item>\\n    <ion-item *ngIf=\\\"!cartList\\\">\\n      <ion-label>\\n        <h2>Nothing is added in cart.</h2>\\n      </ion-label>\\n    </ion-item>\\n  </ion-list>\\n  <ion-button *ngIf=\\\"cartList != 0\\\" expand=\\\"block\\\" color=\\\"primary\\\" (click)=\\\"checkout()\\\">Checkout</ion-button>\\n</ion-content>\\n\"","module.exports = \"ion-content {\\n  background: transparent !important; }\\n\"","import { Component, OnInit, NgZone } from '@angular/core';\nimport {CartService} from '../service/cart.service';\nimport { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner/ngx';\n\nimport { AlertController } from '@ionic/angular';\n\nimport { ToastController } from '@ionic/angular';\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.page.html',\n  styleUrls: ['./cart.page.scss'],\n})\nexport class CartPage implements OnInit {\n  cartList:any=[];\n  constructor(private cart:CartService, private toast:ToastController, private qrScanner: QRScanner,\n    private zone: NgZone,\n    public Alert: AlertController){\n    this.cartList = cart.getList()\n   }\n\n  ngOnInit() {\n  }\n\n  checkout(){\n    this.cart.buy().subscribe(\n      async value => {\n        let toast = await this.toast.create({\n          message: 'Items bought',\n          duration: 2000\n        });\n    \n        toast.present();\n        this.cartList=[];\n       //console.log(value);\n      },\n      err => {\n        console.log(err);\n      }\n    );\n    //this.cartList\n  }\n  async presentAlert(e='You need to allow camera permission') {\n    const alert = await this.Alert.create({\n     header: 'Permission Error',\n     subHeader: 'Camera Permission error',\n     message: e,\n     buttons: ['OK']\n   });\n\n   await alert.present();\n }\n  addCart(){\n    // this.cart.fetch({id:'5bbe29b83251c503f425d61f'}).subscribe(\n    //   async value => {\n    //     this.cart.add(value);\n    //     this.cartList = this.cart.getList();\n    //   },\n    //   err => {\n    //     console.log(err);\n    //   }\n    // );\n    window.document.querySelector('ion-app').classList.add('transparentBody');\n    this.qrScanner.prepare()\n  .then((status: QRScannerStatus) => {\n     if (status.authorized) {\n       // camera permission was granted\n\n       var ionApp = <HTMLElement>document.getElementsByTagName(\"ion-app\")[0];\n       // start scanning\n       let scanSub = this.qrScanner.scan().subscribe((text: string) => {\n//        alert('Scanned something'+ text);\n//text\nthis.cart.fetch(text).subscribe(\n  async value => {\n    await this.cart.add(value);\n    this.zone.run(() => {\n      this.cartList = this.cart.getList();\n  });\n\n  //  debugger;\n  },\n  err => {\n    console.log(err);\n  }\n);\n        ionApp.style.display = \"block\";\n         this.qrScanner.hide(); // hide camera preview\n         scanSub.unsubscribe(); // stop scanning\n         window.document.querySelector('ion-app').classList.remove('transparentBody')\n       });\n       ionApp.style.display = \"none\";\n       this.qrScanner.show();\n\n     } else if (status.denied) {\n      this.presentAlert();\n     } else {\n      this.presentAlert('don\\'t know');\n       // permission was denied, but not permanently. You can ask for permission again at a later time.\n     }\n  })\n  .catch((e: any) => console.log('Error is',  this.presentAlert(e)));\n  }\n\n  async removeCart(index){\n    let toast = await this.toast.create({\n      message: 'Item removed',\n      duration: 2000\n    });\n\n    toast.present();\n    this.cartList==this.cart.remove(index);\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Response } from '@angular/http';\nimport { HttpHeaders } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CartService {\n\n  cartList:any = [];\n\n  constructor(public http: HttpClient) { }\n\n  add(product){\n    const foundItem = this.cartList.filter(function(item) {\n      return item.id === product.id;\n    })[0];\n    \n\n    if(foundItem) {\n      product.count+=product.count;\n    }else {\n      product.count=1;\n      this.cartList.push(product);\n    }\n  }\n\n  getList(){\n    return this.cartList\n  }\n\n  remove(index){\n    this.cartList.splice( index, 1 );\n    return this.cartList;\n  }\n\n  buy(){\n    let rewards=0, total=0;\n    this.cartList.forEach((val, key) => {\n      let product = this.cartList[key];\n      rewards += (product.rewards * product.count);\n      total += (product.price * product.count);\n    });\n    \n    const httpOptions = {\n      headers: new HttpHeaders({\n      'Content-Type':  'application/json'\n      })\n    };\n\n    const item = this.cartList;\n    const date =  new Date();\n\n    let order = { item, total, rewards, date };\n\n    return this.http.post(\"http://192.168.1.103:3000/application/buy\", order, httpOptions).pipe(map((response: Response) => console.log(response) ));\n  }\n\n  fetch(productId){\n    const httpOptions = {\n      headers: new HttpHeaders({\n      'Content-Type':  'application/json'\n      })\n    };\n    return this.http.post(\"http://192.168.1.103:3000/application/fetch\",{id: productId}, httpOptions).pipe(map((response: Response) => response ));\n  }\n}\n"],"sourceRoot":""}